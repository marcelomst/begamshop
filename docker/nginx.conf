server {
  listen 80;
  server_name localhost;

  # Root points to mounted workspace root to include index.html at repo root
  root /workspace;
  index index.html;

  # Serve static assets from /public if present
  location /public/ {
    try_files $uri =404;
    expires 7d;
    add_header Cache-Control "public";
  }

  # Assets folder at repo root
  location /assets/ {
    try_files $uri =404;
    expires 7d;
    add_header Cache-Control "public";
  }

  # JS at repo root
  location /js/ {
    try_files $uri =404;
    expires -1;
    add_header Cache-Control "no-cache";
  }

  # SPA fallback for routes
  location / {
    try_files $uri /index.html;
  }
}
